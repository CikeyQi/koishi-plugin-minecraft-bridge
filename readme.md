![koishi-plugin-minecraft-bridge](https://socialify.git.ci/CikeyQi/koishi-plugin-minecraft-bridge/image?description=1\&font=Raleway\&forks=1\&issues=1\&language=1\&name=1\&owner=1\&pattern=Circuit%20Board\&pulls=1\&stargazers=1\&theme=Auto)

<div align="center">

# Minecraft Bridge

åŸºäº Koishi çš„ Minecraft æ¶ˆæ¯äº’é€šæ’ä»¶ï¼Œä½¿ç”¨é¢å‘é¹Šæ¡¥ Protocol V2 çš„ Node.js SDK å®ç°ç¾¤èŠä¸æœåŠ¡å™¨åŒå‘é€šä¿¡ã€‚

</div>

---

## ğŸ“¦ å®‰è£…

åœ¨ Koishi æ’ä»¶å¸‚åœºæœç´¢ `minecraft-bridge` å³å¯å®‰è£…ã€‚

æˆ–ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼š

```sh
# pnpm
pnpm add koishi-plugin-minecraft-bridge

# yarn
yarn add koishi-plugin-minecraft-bridge

# npm
npm i koishi-plugin-minecraft-bridge
```

---

## âš™ï¸ é…ç½®æŒ‡å—

### ğŸ“Œ å‰ç½®å‡†å¤‡

å¼€å§‹å‰ï¼Œè¯·å…ˆåœ¨ Minecraft æœåŠ¡ç«¯å®‰è£… **QueQiao**ï¼š

ğŸ‘‰ https://modrinth.com/plugin/queqiao

å‡†å¤‡å†…å®¹ï¼š

1. Minecraft æœåŠ¡ç«¯å·²å®‰è£… QueQiao

2. å‚è€ƒå®˜æ–¹é…ç½®æ–‡æ¡£
   https://queqiao-docs.netlify.app/config/

3. æ ¹æ® QueQiao è¿æ¥æ¨¡å¼é€‰æ‹©æ’ä»¶è¿æ¥æ–¹å¼ï¼š

   * `websocket_server.enable = true` â†’ ä½¿ç”¨ **æ­£å‘è¿æ¥**ï¼ˆKoishi â†’ MCï¼‰
   * `websocket_client.enable = true` â†’ ä½¿ç”¨ **åå‘è¿æ¥**ï¼ˆMC â†’ Koishiï¼‰

4. ä» QueQiao é…ç½®æ–‡ä»¶è®°å½•ï¼š

   * `server_name`ï¼ˆæœåŠ¡å™¨æ ‡è¯†ï¼‰
   * `access_token`ï¼ˆè¿æ¥ä»¤ç‰Œï¼‰

5. æ˜ç¡®è¦æ¡¥æ¥çš„ç›®æ ‡ï¼š

   * ç¾¤æ ‡è¯†ï¼ˆæ¨è `å¹³å°:é¢‘é“ID` æ ¼å¼ï¼‰
   * æœºå™¨äºº `selfId`

ğŸ’¡ å¦‚æœä¸æ¸…æ¥š `é¢‘é“ID` æˆ– `selfId`ï¼Œå¯åœ¨ Koishi ä¸­ä½¿ç”¨ `inspect` æŸ¥çœ‹ã€‚

---

### ğŸ”Œ QueQiao ç«¯é…ç½®

å®˜æ–¹æ–‡æ¡£ï¼š
https://queqiao-docs.netlify.app/config/

è¿æ¥æ¨¡å¼å¯¹åº”å…³ç³»ï¼š

| QueQiao é…ç½®                       | æ’ä»¶è¿æ¥æ–¹å¼            | å…³é”®é…ç½®                                                  |
| -------------------------------- | ----------------- | ----------------------------------------------------- |
| `websocket_server.enable = true` | æ­£å‘è¿æ¥ï¼ˆKoishi ä¸»åŠ¨è¿æ¥ï¼‰ | `servers[].forward` `servers[].url` `servers[].token` |
| `websocket_client.enable = true` | åå‘è¿æ¥ï¼ˆMC ä¸»åŠ¨è¿æ¥ï¼‰     | `reverse` `path` `port` `token`                       |

ä¸¤ç§æ¨¡å¼å¯åŒæ—¶å¯ç”¨ã€‚

é…ç½®å®Œæˆåè¯·ç¡®è®¤ï¼š

* `server_name` â†’ å¯¹åº” `servers[].name`
* `access_token` â†’ å¯¹åº”è¿æ¥ tokenï¼ˆæ­£å‘/åå‘ï¼‰

---

### ğŸ¤– Koishi ç«¯é…ç½®

æ’ä»¶é…ç½®åˆ†ä¸º **å…¨å±€é…ç½®** ä¸ **æœåŠ¡å™¨é…ç½®**ã€‚

---

#### å…¨å±€é…ç½®

| å‚æ•°           | è¯´æ˜         | é»˜è®¤      |
| ------------ | ---------- | ------- |
| `prefix`     | å†…ç½®å‘½ä»¤å‰ç¼€     | `#`     |
| `groupName`  | MC ä¸­æ˜¾ç¤ºç¾¤åç§°  | `true`  |
| `serverName` | ç¾¤ä¸­æ˜¾ç¤ºæœåŠ¡å™¨åç§°  | `true`  |
| `verb`       | æ¶ˆæ¯è¿æ¥è¯      | `è¯´ï¼š`    |
| `ciImage`    | å›¾ç‰‡è½¬ CICode | `false` |
| `debug`      | è°ƒè¯•æ—¥å¿—       | `false` |

---

#### åå‘è¿æ¥é…ç½®

| å‚æ•°        | è¯´æ˜                     | é»˜è®¤              |
| --------- | ---------------------- | --------------- |
| `reverse` | å¯ç”¨åå‘è¿æ¥                 | `true`          |
| `path`    | WebSocket è·¯å¾„           | `/minecraft/ws` |
| `port`    | ç›‘å¬ç«¯å£                   | `8080`          |
| `token`   | QueQiao `access_token` | `''`            |

---

#### `servers[]`ï¼ˆæ”¯æŒå¤šä¸ªæœåŠ¡å™¨ï¼‰

| å‚æ•°         | è¯´æ˜                           | é»˜è®¤å€¼                  |
| ---------- | ---------------------------- | -------------------- |
| `name`     | å¿…é¡»ä¸ QueQiao `server_name` ä¸€è‡´ | â€”ï¼ˆå¿…å¡«ï¼‰                |
| `channels` | ç¾¤åˆ—è¡¨ï¼ˆ`å¹³å°:é¢‘é“ID` æˆ– `é¢‘é“ID`ï¼‰      | `[]`                 |
| `bots`     | å‘é€ç¾¤æ¶ˆæ¯çš„æœºå™¨äºº `selfId`           | `[]`                 |
| `forward`  | å¯ç”¨æ­£å‘è¿æ¥                       | `true`               |
| `url`      | æ­£å‘ WebSocket åœ°å€              | `ws://127.0.0.1:8081` |
| `token`    | QueQiao `access_token`       | `''`                 |
| `retries`  | æœ€å¤§é‡è¿æ¬¡æ•°ï¼ˆ0 ä¸ºæ— é™ï¼‰                | `3`                  |
| `rcon`     | RCON å‘½ä»¤å‰ç¼€                    | `/`                  |
| `users`    | RCON ç™½åå•ï¼ˆä¸ºç©ºä»…ç®¡ç†å‘˜å¯ç”¨ï¼‰           | `[]`                 |
| `mask`     | MC â†’ ç¾¤æ¶ˆæ¯è¿‡æ»¤æ­£åˆ™                 | `''`                 |

ğŸ’¡ è·å– `channels` / `bots`ï¼š

åœ¨ç›®æ ‡ç¾¤å‘é€ `inspect`ï¼ŒæŒ‰è¿”å›ä¿¡æ¯å¡«å†™ã€‚

---

## ğŸš€ ä½¿ç”¨è¯´æ˜

### åŸºç¡€å‘½ä»¤ï¼ˆé»˜è®¤å‰ç¼€ `#`ï¼‰

| å‘½ä»¤               | æƒé™  | è¯´æ˜        |
| ---------------- | --- | --------- |
| `#mcs`           | æ‰€æœ‰äºº | æŸ¥çœ‹æœåŠ¡å™¨è¿æ¥çŠ¶æ€ |
| `#mcr`           | ç®¡ç†å‘˜ | é‡è¿æ‰€æœ‰æœåŠ¡å™¨   |
| `#mct <æ–‡æœ¬>`      | æ‰€æœ‰äººï¼ˆä»…ç¾¤èŠï¼‰ | å‘é€æ ‡é¢˜      |
| `#mcst <æ–‡æœ¬>`     | æ‰€æœ‰äººï¼ˆä»…ç¾¤èŠï¼‰ | å‘é€å‰¯æ ‡é¢˜     |
| `#mcab <æ–‡æœ¬>`     | æ‰€æœ‰äººï¼ˆä»…ç¾¤èŠï¼‰ | å‘é€åŠ¨ä½œæ      |
| `#mcp <ç©å®¶> <æ–‡æœ¬>` | æ‰€æœ‰äººï¼ˆä»…ç¾¤èŠï¼‰ | å‘ç©å®¶å‘é€ç§èŠ   |

---

### ğŸ”„ æ¶ˆæ¯åŒæ­¥æœºåˆ¶

* **ç¾¤ â†’ MC**ï¼šæ™®é€šç¾¤æ¶ˆæ¯è‡ªåŠ¨åŒæ­¥
* **MC â†’ ç¾¤**ï¼šèŠå¤©ã€è¿›é€€æœã€æ­»äº¡ã€æˆå°±ç­‰äº‹ä»¶åŒæ­¥
* æ”¯æŒï¼š

  * ä¸€ä¸ªç¾¤ç»‘å®šå¤šä¸ªæœåŠ¡å™¨
  * ä¸€ä¸ªæœåŠ¡å™¨ç»‘å®šå¤šä¸ªç¾¤

---

### ğŸ§° RCON ä½¿ç”¨

ç¾¤å†…å‘é€ä»¥ RCON å‰ç¼€ï¼ˆé»˜è®¤ `/`ï¼‰å¼€å¤´çš„æ¶ˆæ¯å³å¯æ‰§è¡Œï¼ˆä»…ç¾¤èŠç”Ÿæ•ˆï¼‰ï¼š

```
/list
/tps
```

æƒé™è§„åˆ™ï¼š

* ç®¡ç†å‘˜ï¼ˆauthority â‰¥ 4ï¼‰å§‹ç»ˆå…è®¸
* æ™®é€šç”¨æˆ·éœ€åœ¨ `users` ç™½åå•ä¸­

---

## ğŸ›  å¸¸è§é—®é¢˜æ’æŸ¥

### 1ï¸âƒ£ `#mcs` æ˜¾ç¤ºæœªè¿æ¥

æ£€æŸ¥ï¼š

* `servers[].name` æ˜¯å¦ä¸ `server_name` å®Œå…¨ä¸€è‡´ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
* token æ˜¯å¦ä¸€è‡´
* æ­£å‘æ¨¡å¼ â†’ `forward` + `url` å¯è®¿é—®
* åå‘æ¨¡å¼ â†’ `reverse/path/port/token` åŒ¹é…
* å¯å¼€å¯ `debug` æŸ¥çœ‹æ—¥å¿—

---

### 2ï¸âƒ£ MC æ¶ˆæ¯æœªåŒæ­¥åˆ°ç¾¤

æ£€æŸ¥ï¼š

* æ˜¯å¦é…ç½® `channels` å’Œ `bots`
* `inspect` è·å–çš„ ID æ˜¯å¦æ­£ç¡®
* æœºå™¨äººæ˜¯å¦åœ¨çº¿
* `mask` æ˜¯å¦è¿‡æ»¤å…¨éƒ¨æ¶ˆæ¯

---

### 3ï¸âƒ£ ç¾¤æ¶ˆæ¯æœªåŒæ­¥åˆ° MC

æ£€æŸ¥ï¼š

* ä»…ç¾¤èŠæ¶ˆæ¯ä¼šåŒæ­¥
* `channels` æ˜¯å¦åŒ¹é…
* RCON å‰ç¼€æ¶ˆæ¯ä¸ä¼šä½œä¸ºèŠå¤©è½¬å‘
* æ­£å‘è¿æ¥æ˜¯å¦å¯ç”¨

---

### 4ï¸âƒ£ RCON æ— å“åº”æˆ–æ— æƒé™

æ£€æŸ¥ï¼š

* å‰ç¼€æ˜¯å¦åŒ¹é… `rcon`
* ç”¨æˆ·æ˜¯å¦åœ¨ç™½åå•
* å‘½ä»¤åœ¨ MC ç«¯æ˜¯å¦æœ‰æ•ˆ

---

## ğŸ“„ License

    Copyright (c) 2026-present CikeyQi

    Licensed under the GNU Affero General Public License v3.0.
    You may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    https://www.gnu.org/licenses/agpl-3.0.html
